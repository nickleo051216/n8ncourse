<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZN Studio â€” n8n å¯¦ä½œèª² å ±åè¡¨</title>
  <meta name="description" content="ZN Studioï¼šå¾é›¶é–‹å§‹ï¼Œç”¨ n8n æ‰“é€ å±¬æ–¼ä½ çš„ç¬¬ä¸€æ¢è‡ªå‹•åŒ–æµç¨‹ â€” å ±åè¡¨" />
  <style>
    /* --------- Reset & åŸºæœ¬ --------- */
    :root{
      --accent:#0ea5a4;
      --dark:#0f1724;
      --muted:#6b7280;
      --card:#0b1220;
      --bg:#071026;
      --glass: rgba(255,255,255,0.04);
      font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background: linear-gradient(180deg,#041227 0%, #071026 60%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:32px;
      min-height:100vh;
    }
    .container{
      max-width:980px;
      margin:0 auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:28px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex;gap:16px;align-items:center;margin-bottom:20px}
    .hero-img{
      width:120px;height:80px;border-radius:8px;overflow:hidden;flex-shrink:0;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
      background:linear-gradient(135deg,#083047,#0a2130);
      display:flex;align-items:center;justify-content:center;
    }
    .hero-img img{width:100%;height:100%;object-fit:cover}
    h1{font-size:20px;margin:0 0 4px 0}
    p.lead{margin:0;color:var(--muted);font-size:14px}

    /* --------- å¡ç‰‡æ¨£å¼ --------- */
    .card{background:var(--card);padding:18px;border-radius:10px;margin-bottom:18px;border:1px solid rgba(255,255,255,0.03)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    label{display:block;font-size:13px;color:#cfe8ec;margin-bottom:6px}
    input[type="text"], input[type="email"], input[type="tel"], select, textarea {
      width:100%;
      padding:10px 12px;
      border-radius:8px;border:1px solid rgba(255,255,255,0.04);
      background:transparent;color: #e6eef6;
      outline:none;font-size:14px;
    }
    /* ä¿®æ­£ä¸‹æ‹‰é¸å–®é¸é …é¡è‰² */
    select {
      background-color: #0b1220;
      color: #e6eef6;
    }
    select option {
      background-color: #0b1220;
      color: #e6eef6;
      padding: 8px;
    }
    select option:hover {
      background-color: #0ea5a4;
      color: #ffffff;
    }
    select:focus {
      border-color: #0ea5a4;
      box-shadow: 0 0 0 2px rgba(14, 165, 164, 0.1);
    }
    textarea{min-height:96px;resize:vertical;padding-top:10px}
    .small{font-size:13px;color:var(--muted);margin-top:6px}
    .radio-row{display:flex;gap:12px;align-items:center}
    .radio{
      display:flex;gap:8px;align-items:center;padding:8px 10px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)
    }
    .muted{color:var(--muted);font-size:13px}

    /* --------- CTA --------- */
    .actions{display:flex;gap:12px;align-items:center;justify-content:flex-end;margin-top:12px}
    button.primary{background:linear-gradient(90deg,var(--accent),#06b6d4);color:#052024;padding:12px 18px;border-radius:10px;border:none;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(13,148,136,0.18)}
    button.ghost{background:transparent;color:var(--muted);padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}

    /* --------- è¨Šæ¯ --------- */
    .note{background:rgba(14,165,164,0.06);padding:10px;border-radius:8px;color:#9fe6e2;font-size:13px;border:1px solid rgba(14,165,164,0.06)}

    /* --------- å°å°ºå¯¸éŸ¿æ‡‰ --------- */
    @media (max-width:800px){
      .grid{grid-template-columns:1fr}
      header{flex-direction:row;gap:12px}
      .hero-img{width:96px;height:64px}
      .actions{flex-direction:column;align-items:stretch}
    }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <div class="hero-img" aria-hidden="true">
        <img src="https://drive.google.com/file/d/1u1WAUTMJibRMicND39ydpLAVxldHl-0V/view?usp=drive_link" alt="n8n workflow" id="coverImg" />
      </div>
      <div>
        <h1>ğŸš€ ZN Studio â€” å¾é›¶é–‹å§‹çš„ n8n å¯¦ä½œèª²ï¼ˆ12/20ï¼‰</h1>
        <p class="lead">å°ç­ 15 äºº â€¢ å°åŒ—å¸‚ä¸­æ­£å€è¨±æ˜Œè¡— 42 ä¹‹ 1 è™Ÿ 4 æ¨“ D æ•™å®¤ â€¢ 13:00â€“17:00 â€¢ æ•™ä½ å®Œæˆç¬¬ä¸€æ¢è‡ªå‹•åŒ–æµç¨‹</p>
      </div>
    </header>

    <form id="signupForm" class="card" autocomplete="on">
      <!-- 1. åŸºæœ¬è³‡æ–™ -->
      <section class="card" aria-labelledby="sec-basic">
        <h2 id="sec-basic" style="margin:0 0 8px 0;font-size:15px">ä¸€ã€åŸºæœ¬è³‡æ–™</h2>
        <div class="grid">
          <div>
            <label for="name">å§“åï¼ˆå¿…å¡«ï¼‰</label>
            <input id="name" name="name" type="text" placeholder="è«‹å¡«å¯«çœŸå¯¦å§“å" required />
          </div>
          <div>
            <label for="phone">è¯çµ¡é›»è©±ï¼ˆå¿…å¡«ï¼‰</label>
            <input id="phone" name="phone" type="tel" placeholder="09xx-xxx-xxx" required />
          </div>
          <div>
            <label for="email">Emailï¼ˆå¿…å¡«ï¼‰</label>
            <input id="email" name="email" type="email" placeholder="name@example.com" required />
          </div>
          <div>
            <label for="line">LINE IDï¼ˆé¸å¡«ï¼‰</label>
            <input id="line" name="line" type="text" placeholder="LINE ID" />
          </div>
          <div>
            <label for="company">å…¬å¸ï¼å–®ä½ï¼ˆé¸å¡«ï¼‰</label>
            <input id="company" name="company" type="text" placeholder="å…¬å¸æˆ–å–®ä½" />
          </div>
          <div>
            <label for="title">è·ç¨±ï¼ˆé¸å¡«ï¼‰</label>
            <input id="title" name="title" type="text" placeholder="è·ç¨±" />
          </div>
        </div>
      </section>

      <!-- 2. å ±åè³‡è¨Š -->
      <section class="card" aria-labelledby="sec-info">
        <h2 id="sec-info" style="margin:0 0 8px 0;font-size:15px">äºŒã€å ±åè³‡è¨Š</h2>

        <label for="course">æ¬²å ±åèª²ç¨‹ / å ±åå ´æ¬¡ï¼ˆå¿…é¸ï¼‰</label>
        <select id="course" name="course" required>
          <option value="">-- é¸æ“‡èª²ç¨‹ --</option>
          <option value="n8n-intro-20251220">ZN Studioï½œn8n å¯¦ä½œå…¥é–€ï¼ˆ2025/12/20ï¼‰</option>
        </select>

        <div style="margin-top:12px">
          <label for="qty">å ±åäººæ•¸</label>
          <select id="qty" name="qty" required>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="other">å…¶ä»–ï¼ˆè«‹è¨»æ˜ï¼‰</option>
          </select>
          <div id="otherQtyWrap" style="display:none;margin-top:8px">
            <input id="otherQty" name="otherQty" type="text" placeholder="è«‹è¼¸å…¥äººæ•¸" />
          </div>
        </div>
      </section>

      <!-- 3. ä»˜æ¬¾æ–¹å¼ -->
      <section class="card" aria-labelledby="sec-pay">
        <h2 id="sec-pay" style="margin:0 0 8px 0;font-size:15px">ä¸‰ã€ä»˜æ¬¾æ–¹å¼ï¼ˆå¿…é¸ï¼‰</h2>

        <div class="radio-row" role="radiogroup" aria-label="ä»˜æ¬¾æ–¹å¼">
          <label class="radio">
            <input type="radio" name="payMethod" value="ecpay" checked /> <span class="muted">ç¶ ç•Œé‡‘æµï¼ˆä¿¡ç”¨å¡ / ATM / è¶…å•†ï¼‰</span>
          </label>
          <label class="radio">
            <input type="radio" name="payMethod" value="bank" /> <span class="muted">éŠ€è¡ŒåŒ¯æ¬¾</span>
          </label>
        </div>

        <!-- ç¶ ç•Œä»˜æ¬¾èªªæ˜ -->
        <div id="ecpayBox" style="margin-top:12px">
          <p class="small">é¸æ“‡ç¶ ç•Œé‡‘æµå¾Œï¼Œè¡¨å–®é€å‡ºæœƒå°å‘ç¶ ç•Œçµå¸³é å®Œæˆä»˜æ¬¾ã€‚</p>

          <div style="margin-top:8px" class="grid">
            <div>
              <label for="ecpayMethod">ä»˜æ¬¾æ–¹å¼ï¼ˆç¶ ç•Œï¼‰</label>
              <select id="ecpayMethod" name="ecpayMethod">
                <option value="credit">ä¿¡ç”¨å¡</option>
                <option value="atm">ATM è½‰å¸³</option>
                <option value="convenience">è¶…å•†ä»£ç¢¼</option>
              </select>
            </div>
          </div>
        </div>

        <!-- åŒ¯æ¬¾ä»˜æ¬¾èªªæ˜ -->
        <div id="bankBox" style="display:none;margin-top:12px">
          <p class="small">è«‹ä¾ä¸‹åˆ—å¸³æˆ¶è³‡è¨ŠåŒ¯æ¬¾ï¼ŒåŒ¯æ¬¾å®Œæˆå¾Œè«‹å¡«å¯«æ‚¨çš„åŒ¯æ¬¾å¸³è™Ÿæœ«äº”ç¢¼ã€‚</p>

          <div class="note" id="bankInfo">
            <strong>éŠ€è¡Œåç¨±ï¼š</strong> å°ç£éŠ€è¡Œ<br/>
            <strong>æˆ¶åï¼š</strong> ZN Studio<br/>
            <strong>éŠ€è¡Œå¸³è™Ÿï¼š</strong> 01234567890123
          </div>

          <div style="margin-top:10px">
            <label for="bankLast5">æ‚¨çš„åŒ¯æ¬¾å¸³è™Ÿæœ« 5 ç¢¼ï¼ˆåŒ¯æ¬¾å®Œæˆå¾Œå¡«å¯«ï¼‰</label>
            <input id="bankLast5" name="bankLast5" type="text" placeholder="ä¾‹å¦‚ï¼š12345" maxlength="5" />
            <div class="small">ç¯„ä¾‹ï¼šå¦‚æœæ‚¨çš„å¸³è™Ÿæ˜¯ 123-456-789012ï¼Œè«‹å¡«å¯« 89012</div>
          </div>
        </div>
      </section>

      <!-- 4. ç™¼ç¥¨è³‡è¨Š -->
      <section class="card" aria-labelledby="sec-invoice">
        <h2 id="sec-invoice" style="margin:0 0 8px 0;font-size:15px">å››ã€ç™¼ç¥¨è³‡è¨Š</h2>

        <div style="display:flex;gap:12px;align-items:center">
          <label><input type="radio" name="invType" value="two" checked /> äºŒè¯å¼ï¼ˆå€‹äººï¼‰</label>
          <label><input type="radio" name="invType" value="three" /> ä¸‰è¯å¼ï¼ˆå…¬å¸ï¼‰</label>
        </div>

        <div id="threeInvoice" style="display:none;margin-top:10px">
          <label for="vatTitle">å…¬å¸æŠ¬é ­</label>
          <input id="vatTitle" name="vatTitle" type="text" placeholder="å…¬å¸æŠ¬é ­" />
          <label for="vatNo" style="margin-top:8px">çµ±ä¸€ç·¨è™Ÿ</label>
          <input id="vatNo" name="vatNo" type="text" placeholder="çµ±ç·¨" />
        </div>

        <div style="margin-top:8px">
          <label for="invEmail">ç™¼ç¥¨æ¥æ”¶ Emailï¼ˆè‹¥ç‚ºé›»å­ç™¼ç¥¨ï¼‰</label>
          <input id="invEmail" name="invEmail" type="email" placeholder="receipt@example.com" />
        </div>
      </section>

      <!-- 5. å‚™è¨» -->
      <section class="card" aria-labelledby="sec-remark">
        <h2 id="sec-remark" style="margin:0 0 8px 0;font-size:15px">äº”ã€å…¶ä»–å‚™è¨»</h2>
        <textarea id="remark" name="remark" placeholder="ç‰¹æ®Šéœ€æ±‚ã€é£²é£Ÿç¦å¿Œã€åŒå ´å ±åç­‰è«‹è¨»æ˜ï¼ˆé¸å¡«ï¼‰"></textarea>
      </section>

      <!-- 6. æäº¤ -->
      <div class="actions">
        <button type="button" class="ghost" onclick="resetForm()">é‡è¨­è¡¨å–®</button>
        <button type="submit" class="primary" id="submitBtn">æäº¤å ±å</button>
      </div>

      <div style="margin-top:12px" class="small">æäº¤å¾Œè«‹ç•™æ„ Email æˆ– Lineï¼Œæˆ‘å€‘å°‡æ–¼ 1â€“2 å€‹å·¥ä½œå¤©å…§ç¢ºèªå ±åç‹€æ…‹ã€‚</div>
    </form>

    <footer style="margin-top:18px;text-align:center;color:var(--muted);font-size:13px">
      ZN Studio &nbsp;â€¢&nbsp; å°ç­å¯¦ä½œèª²ï¼ˆåé¡æœ‰é™ï¼‰&nbsp;â€¢&nbsp; å¦‚éœ€ç™¼ç¥¨æˆ–æ”¶æ“šè«‹æ–¼å ±åæ™‚å‘ŠçŸ¥
    </footer>
  </div>

  <script>
    // ===== n8n Webhook URL =====
    const N8N_WEBHOOK_URL = "https://nickleo9.zeabur.app/webhook/course-registration";

    const form = document.getElementById('signupForm');
    const payRadios = document.getElementsByName('payMethod');
    const bankBox = document.getElementById('bankBox');
    const ecpayBox = document.getElementById('ecpayBox');
    const qtySelect = document.getElementById('qty');
    const otherQtyWrap = document.getElementById('otherQtyWrap');
    const submitBtn = document.getElementById('submitBtn');
    const invTypeRadios = document.getElementsByName('invType');
    const threeInvoice = document.getElementById('threeInvoice');

    // ===== ä»˜æ¬¾æ–¹å¼åˆ‡æ› =====
    function updatePayUI() {
      const v = Array.from(payRadios).find(r=>r.checked).value;
      if (v === 'bank') {
        bankBox.style.display = 'block';
        ecpayBox.style.display = 'none';
      } else {
        bankBox.style.display = 'none';
        ecpayBox.style.display = 'block';
      }
    }
    Array.from(payRadios).forEach(r => r.addEventListener('change', updatePayUI));
    updatePayUI();

    // ===== äººæ•¸é¸æ“‡ =====
    qtySelect.addEventListener('change', () => {
      if (qtySelect.value === 'other') {
        otherQtyWrap.style.display = 'block';
      } else {
        otherQtyWrap.style.display = 'none';
        document.getElementById('otherQty').value = '';
      }
    });

    // ===== ç™¼ç¥¨é¡å‹åˆ‡æ› =====
    Array.from(invTypeRadios).forEach(r => {
      r.addEventListener('change', () => {
        if (r.value === 'three') {
          threeInvoice.style.display = 'block';
        } else {
          threeInvoice.style.display = 'none';
        }
      });
    });

    // ===== é‡è¨­è¡¨å–® =====
    function resetForm(){
      if (!confirm('ç¢ºå®šè¦é‡è¨­è¡¨å–®å—ï¼Ÿ')) return;
      form.reset();
      updatePayUI();
      otherQtyWrap.style.display = 'none';
      threeInvoice.style.display = 'none';
    }

    // ===== è¡¨å–®é€å‡ºè™•ç†ï¼ˆæ”¹ç”¨ JSON æ ¼å¼ï¼‰=====
    form.addEventListener('submit', async (ev) => {
      ev.preventDefault();
      
      submitBtn.disabled = true;
      submitBtn.textContent = 'æ­£åœ¨è™•ç†...';

      // === é©—è­‰å¿…å¡«æ¬„ä½ ===
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const course = document.getElementById('course').value;

      if (!name || !phone || !email || !course) {
        alert('è«‹å¡«å¯«å§“åã€é›»è©±ã€Email èˆ‡æ¬²å ±åèª²ç¨‹ã€‚');
        submitBtn.disabled = false;
        submitBtn.textContent = 'æäº¤å ±å';
        return;
      }

      // === æ”¶é›†è¡¨å–®è³‡æ–™ï¼ˆJSON æ ¼å¼ï¼‰===
      const formData = {
        // åŸºæœ¬è³‡æ–™
        name: name,
        email: email,
        phone: phone,
        line: document.getElementById('line').value.trim() || '',
        company: document.getElementById('company').value.trim() || '',
        title: document.getElementById('title').value.trim() || '',
        
        // å ±åè³‡è¨Š
        course: course,
        qty: document.getElementById('qty').value,
        otherQty: document.getElementById('otherQty').value || '',
        
        // ä»˜æ¬¾æ–¹å¼
        payMethod: document.querySelector('input[name="payMethod"]:checked').value,
        
        // ç¶ ç•Œé‡‘æµ
        ecpayMethod: document.getElementById('ecpayMethod').value || '',
        
        // éŠ€è¡ŒåŒ¯æ¬¾
        bankLast5: document.getElementById('bankLast5').value || '',
        
        // ç™¼ç¥¨è³‡è¨Š
        invType: document.querySelector('input[name="invType"]:checked').value,
        vatTitle: document.getElementById('vatTitle').value || '',
        vatNo: document.getElementById('vatNo').value || '',
        invEmail: document.getElementById('invEmail').value || '',
        
        // å‚™è¨»
        remark: document.getElementById('remark').value.trim() || ''
      };

      console.log('æº–å‚™é€å‡ºçš„è³‡æ–™:', formData);

      // === é€åˆ° n8n Webhook ===
      try {
        const response = await fetch(N8N_WEBHOOK_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        console.log('n8n å›æ‡‰:', result);

        // === è™•ç†å›æ‡‰ ===
        if (result.success) {
          // å¦‚æœæ˜¯ç¶ ç•Œä»˜æ¬¾ï¼Œå°å‘ä»˜æ¬¾é 
          if (formData.payMethod === 'ecpay' && result.paymentUrl) {
            alert(`âœ… å ±åæˆåŠŸï¼\nè¨‚å–®ç·¨è™Ÿï¼š${result.orderId}\n\nå³å°‡å°å‘ç¶ ç•Œä»˜æ¬¾é é¢...`);
            // è·³è½‰åˆ°ä»˜æ¬¾æˆåŠŸé é¢ï¼ˆå¸¶ä¸Šè¨‚å–®ç·¨è™Ÿå’Œå§“åï¼‰
            window.location.href = `https://nickleo051216.github.io/n8ncourse/course-success.html?order=${result.orderId}&name=${encodeURIComponent(name)}`;
          } else {
            // åŒ¯æ¬¾çš„è©±ï¼Œé¡¯ç¤ºæç¤º
            alert(`âœ… å ±åæˆåŠŸï¼\nè¨‚å–®ç·¨è™Ÿï¼š${result.orderId}\n\nè«‹ä¾é é¢ä¸Šçš„åŒ¯æ¬¾è³‡è¨Šå®ŒæˆåŒ¯æ¬¾ã€‚\næˆ‘å€‘ç¢ºèªå¾Œæœƒèˆ‡æ‚¨è¯çµ¡ã€‚`);
            // å¯ä»¥å°å‘åŒ¯æ¬¾èªªæ˜é æˆ–æˆåŠŸé 
            window.location.href = `https://nickleo051216.github.io/n8ncourse/course-success.html?order=${result.orderId}&name=${encodeURIComponent(name)}`;
          }
        } else {
          alert('âŒ å ±åå¤±æ•—ï¼š' + (result.error || 'æœªçŸ¥éŒ¯èª¤'));
        }

      } catch (error) {
        console.error('å ±åéŒ¯èª¤:', error);
        alert('âŒ é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯çµ¡ä¸»è¾¦æ–¹ã€‚\n\néŒ¯èª¤è¨Šæ¯ï¼š' + error.message + '\n\nè¯çµ¡æ–¹å¼ï¼š\nEmail: nickleo051216@gmail.com\nLine: https://lin.ee/Faz0doj');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'æäº¤å ±å';
      }
    });
  </script>
</body>
</html>
